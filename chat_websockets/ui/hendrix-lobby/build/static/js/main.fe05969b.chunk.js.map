{"version":3,"sources":["utils/utils.js","containers/connectionStatus.js","components/MessageEntry.js","actions/proto.js","actions/messages.js","actions/connectionActions.js","containers/messages.js","components/PrefixedInput.js","containers/chatProto.js","containers/connectionButtons.js","components/App.js","reducers/connection.js","reducers/proto.js","reducers/messages.js","reducers/lastMessage.js","reducers/index.js","store/configureStore.js","serviceWorker.js","index.js"],"names":["clearToken","state","recvdToken","pendingMsgToken","isMobileLayout","test","navigator","userAgent","prevMessages","lastMessage","prevMessage","compWidth","ConnectionStatus","proto","this","props","unhandledWsMessage","console","log","connection","messages","statusLast","fsize","className","style","fontSize","data-tooltip","JSON","stringify","info","data-tooltip-location","connected","connecting","nym","room","computeTooltip","React","Component","connect","store","MessageEntry","content","styleWidth","width","overflowWrap","dangerouslySetInnerHTML","__html","value","color","isHendrix","from_nym","dateTime","UNIX_timestamp","a","Date","year","getFullYear","month","getMonth","date","getDate","hour","getHours","min","getMinutes","sec","getSeconds","timeConverter","date_created","time","imageClass","classNames","blurredClass","src","alt","height","renderTxtDiv","initSelectroom","dstRoom","dispatch","msgToken","uuidv4","selectRoomMessage","action","destination_room","token","type","payload","send","message_received","ev","protoMsg","parse","data","err","msg","status","handleAuthenticate","perPage","page","last_message","handleSelectRoom","setTimeout","handleRegularMessageRcvd","msgs","result","map","history","handleHistoryRcvd","conn","connectionClose","close","expwidth","imgdim","Messages","lastScrollTop","colors","btnClickHandler","historyRetrieve","scrollTopHandler","st","viewPort","current","scrollTop","historyDisabled","createRef","Boolean","index","undefined","i","Math","floor","random","getRandomColor","newcolor","dkey","String","key","closedscr","notifyFlag","colorScroll","id","ref","onScroll","position","overflow","overflowX","scrollbarWidth","scrollbarColor","marginBottom","border","borderRight","borderLeft","borderBottom","borderStyle","borderColor","alignItems","Fragment","onClick","disabled","renderTemplate","sendmessage","PrefixedInput","commonHandler","input","message","startsWith","query","substr","split","length","nextRoom","changeRoom","sender","keyPrsHandler","keyCode","which","preventDefault","onKeyPress","marginLeft","ChatProto","sendMessage","sendQueryMenu","sendDisabled","menu","query_name","parameters","destinationRoom","ConnectionButtons","initConnect","initAuthenticate","paddingRight","authenticated","WebSocket","window","location","host","onopen","onerror","onclose","onmessage","authmessage","App","initialState","error","rootReducer","combineReducers","createStore","applyMiddleware","logger","thunk","isLocalhost","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"4ZAAO,SAASA,EAAWC,EAAOC,GAC9B,OAAIA,IAAeD,EAAME,gBACd,GAEAF,EAAME,gBAId,SAASC,IACZ,QACI,8GAA8GC,KAC1GC,UAAUC,WAkBf,SAASC,EAAaC,GACzB,GAAmB,MAAfA,EACA,OAAO,EAEX,IAAIC,EAAcD,GAAe,EAAIA,EAAc,EAAI,KACvD,OAAOC,EAAc,EAAIA,EAAc,EC5B3C,ICAWC,EDILC,E,yLACgB,IACNC,EAAUC,KAAKC,MAAfF,MACR,OAAOA,EAAMV,iBAAmBU,EAAMG,qB,+BAGtCC,QAAQC,IAAI,wBADP,MAEwCJ,KAAKC,MAA1CI,EAFH,EAEGA,WAAYC,EAFf,EAEeA,SAAUC,EAFzB,EAEyBA,WAC1BX,EAAcF,EAAaY,EAASX,aACpCa,EAAQlB,IAAmB,MAAQ,OACvC,OACI,yBACImB,UAAU,QACVC,MAAO,CACHC,SAAUH,IAGd,uBACII,eAAcC,KAAKC,UAAUP,EAAWQ,MACxCC,wBAAsB,SAF1B,UAIY,IACPX,EAAWY,UACN,YACAZ,EAAWa,WACX,aACA,gBAEV,uCACY,IACR,0BACIN,eAAA,UAnCT,6CAmCS,OAA0BN,EAASa,IAAnC,cAjCpB,mFAkCoBH,wBAAsB,SAErBV,EAASa,MAGlB,qCAAWb,EAASc,MACpB,8CAAoBxB,GAA4B,OAAhD,KAEA,6BACI,yBAAKa,UAAU,aACX,0BACIG,eAAcZ,KAAKqB,iBACnBL,wBAAsB,SAF1B,4B,GA1COM,IAAMC,WA4EtBC,eArBS,SAAAC,GACpB,MAAO,CACHpB,WAAYoB,EAAMpB,WAClBC,SAAUmB,EAAMnB,SAChBP,MAAO0B,EAAM1B,MACbQ,WAAYkB,EAAMlB,cAgBXiB,CAAyB1B,G,+BC9EpCD,EADAP,IACY,IAEA,I,IA+BVoC,E,qLACWC,EAAS9B,GAClB,IAAI+B,EAAa,CACbC,MAAM,GAAD,OAAKhC,EAAL,MACLiC,aAAc,cAElB,OACI,yBACIrB,UAAU,cACVC,MAAOkB,EACPG,wBAAyB,CACrBC,OAAQL,O,+BAQd,IAAD,EACoB3B,KAAKC,MAAtBgC,EADH,EACGA,MAAOC,EADV,EACUA,MACTC,EAA+B,YAAnBF,EAAMG,SAElBC,EApDd,SAAuBC,GACnB,IAAIC,EAAI,IAAIC,KAAsB,IAAjBF,GAebG,EAAOF,EAAEG,cACTC,EAfS,CACT,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAGeJ,EAAEK,YACjBC,EAAON,EAAEO,UACTC,EAAOR,EAAES,WACbD,EAAOA,EAAO,GAAK,IAAMA,EAAOA,EAChC,IAAIE,EAAMV,EAAEW,aACZD,EAAMA,EAAM,GAAK,IAAMA,EAAMA,EAC7B,IAAIE,EAAMZ,EAAEa,aAIZ,MAAO,CADKP,EAAO,IAAMF,EAAQ,IAAMF,EAAO,IADnCM,EAAO,IAAME,EAAM,KAD9BE,EAAMA,EAAM,GAAK,IAAMA,EAAMA,IA4BRE,CAAcpB,EAAMqB,cAC/BT,EAAOR,EAAS,GAChBkB,EAAOlB,EAAS,GAChBmB,EAAaC,IACf,kBAEEC,EAAeD,IACjB,CAAE,iBAAkBtB,GACpB,cACA,aAEJ,OACI,yBAAK1B,UAAU,aACX,yBAAKA,UAAWiD,GACZ,yBAAKjD,UAAW+C,GACXrB,EACG,yBACIwB,IAAI,gBACJC,IAAI,UACJnD,UAAU,OACVoB,MAAO,GACPgC,OAAQ,KAGZ,yBACIF,IAAI,mBACJC,IAAI,YACJnD,UAAU,OACVoB,MAAO,GACPgC,OAAQ,OAKxB,yBAAKpD,UAAU,wBACT0B,EAIE,KAHA,yBAAK1B,UAAU,eACX,0BAAMyB,MAAOA,GAAb,UAAwBD,EAAMG,YAGtC,yBAAK3B,UAAU,YAAYoC,GAC3B,yBAAKpC,UAAU,YAAY8C,IAE/B,yBAAK9C,UAAU,aACX,yBAAKA,UAAU,WACVT,KAAK8D,aAAa7B,EAAMN,QAAS9B,U,GApE/ByB,IAAMC,W,QCZ1B,SAASwC,EAAe1D,EAAY2D,GACvC,OAAO,SAAAC,GACH,IAAMC,EAAWC,cACXC,EAAoB,CACtBC,OAAQ,cACRC,iBAAkBN,EAClBO,MAAOL,GAEXD,EAAS,CACLO,KAjCyB,wBAkCzBC,QAASP,IAEb7D,EAAWqE,KAAK7D,KAAKC,UAAUsD,KAiChC,SAASO,EAAiBV,EAAU5D,GACvC,OAAO,SAAAuE,GACH,IAAIC,EACJ,IACIA,EAAWhE,KAAKiE,MAAMF,EAAGG,MAC3B,MAAOC,GAML,OALA7E,QAAQC,IAAR,UAAe4E,EAAf,wBACAf,EAAS,CACLO,KAzEa,gBA0EbC,QAASG,EAAGG,OAQpB,OAJAd,EAAS,CACLO,KA9EiB,gBA+EjBC,QAASI,IAELA,EAASI,IAAIZ,QACjB,IAAK,eACDlE,QAAQC,IAAI,6BAqB5B,SAA4ByE,EAAUZ,EAAU5D,GAC5C,OAAQwE,EAASK,QACb,IAAK,UACDjB,EAAS,CACLO,KAnHkB,qBAoHlBC,QAAS,CACLF,MAAOM,EAASI,IAAIV,MACpBpD,IAAK0D,EAASI,IAAI7C,YAG1B2B,EAAe1D,EA/GP,QA+GR0D,CAAwCE,GACxC,MACJ,IAAK,QACDA,EAAS,CACLO,KA5He,kBA6HfC,QAAS,CACLF,MAAOM,EAASI,IAAIV,SAG5B,MACJ,WAxCQY,CAAmBN,EAAUZ,EAAU5D,GACvC,MACJ,IAAK,cACDF,QAAQC,IAAI,4BA0C5B,SAA0ByE,EAAUZ,GAChC,OAAQY,EAASK,QACb,IAAK,UACDjB,EAAS,CACLO,KAzIqB,wBA0IrBC,QAAS,CACLF,MAAOM,EAASI,IAAIV,MACpBnD,KAAMyD,EAASI,IAAI7D,KACnBgE,QAASP,EAASI,IAAII,KACtB1F,YAAakF,EAASI,IAAIK,gBAGlC,MACJ,IAAK,QACDrB,EAAS,CACLO,KAnJkB,qBAoJlBC,QAAS,CACLF,MAAOM,EAASI,IAAIV,SAG5B,MACJ,WA9DQgB,CAAiBV,EAAUZ,GAC3B,MACJ,IAAK,gBC3FV,SAAkCY,EAAUZ,GAC/C,OAAQY,EAASK,QACb,IAAK,UACDjB,EAAS,CACLO,KAZc,iBAadC,QAAS,CACL9C,QAASkD,EAASI,IAAItD,QACtB2B,aAAcuB,EAASI,IAAI3B,aAC3BlB,SAAUyC,EAASI,IAAI7C,SACvBmC,MAAOM,EAASI,IAAIV,SAG5BiB,YAAW,WACPvB,EAAS,CACLO,KArBkB,6BAMjB,KAkBT,MACJ,IAAK,QACDP,EAAS,CACLO,KA1Bc,iBA2BdC,QAAS,CACLF,MAAOM,EAASI,IAAIV,SAG5B,MACJ,WDkEQkB,CAAyBZ,EAAUZ,GACnC,MACJ,IAAK,oBChEV,SAA2BY,EAAUZ,GACxC,OAAQY,EAASK,QACb,IAAK,UACD,IAAMQ,EAAOb,EAASI,IAAIU,OAAOC,KAAI,SAAA3D,GACjC,MAAO,CACHN,QAASM,EAAMN,QACf2B,aAAcrB,EAAMqB,aACpBlB,SAAUH,EAAMG,aAGxB6B,EAAS,CACLO,KA7CqB,wBA8CrBC,QAAS,CACLF,MAAOM,EAASI,IAAIV,MACpBnD,KAAMyD,EAASI,IAAI7D,KACnByE,QAASH,KAGjB,MACJ,IAAK,QACDzB,EAAS,CACLO,KAtDkB,qBAuDlBC,QAASI,EAASI,IAAIV,QAE1B,MACJ,WDwCQuB,CAAkBjB,EAAUZ,GAC5B,MACJ,QACIA,EAAS,CACLO,KAnGS,gBAoGTC,QAASG,EAAGG,SE5GzB,IAKIgB,EAAO,KAiCX,SAASC,IACZD,EAAKE,Q,UC9BEC,EAAWrG,EAAY,IAC9BsG,EAAS7G,EAAiB,IAAM,IAC9B8G,E,YAKF,WAAYnG,GAAQ,IAAD,8BACf,4CAAMA,KALVd,MAAQ,CACJkH,cAAe,KACfC,OAAQ,IAEO,EAmBnBC,gBAAkB,SAAA3B,GAAO,IAAD,EACU,EAAK3E,MAAMK,SAAjCX,EADY,EACZA,YAAayB,EADD,EACCA,KACrB,EAAKnB,MAAMuG,gBAAgB7G,EAAayB,IArBzB,EAwBnBqF,iBAAmB,WACf,IAAMC,EAAK,EAAKC,SAASC,QAAQC,UACjC,GAAgC,MAA5B,EAAK1H,MAAMkH,cAAf,CAIA,GAAIK,EAAK,EAAKvH,MAAMkH,oBAEhB,GAAIK,EAAK,GAAI,CAAC,IAAD,EAKL,EAAKzG,MAAMK,SAHXX,EAFK,EAELA,YACAyB,EAHK,EAGLA,KACA/B,EAJK,EAILA,gBAKJ,GAHK,EAAKyH,gBAAgBzH,EAAiB+B,EAAMzB,IAC7C,EAAKM,MAAMuG,gBAAgB7G,EAAayB,GAExC1B,EAAaC,GAEb,YADA,EAAKgH,SAASC,QAAQC,UAAY,EAAK1H,MAAMkH,eAKzD,EAAKlH,MAAMkH,cAAgBK,GAAM,EAAI,EAAIA,OApBrC,EAAKvH,MAAMkH,cAAgBK,GAAM,EAAI,EAAIA,GAzB7C,EAAKC,SAAWrF,IAAMyF,YAFP,E,6EAKH1H,EAAiB+B,EAAMzB,GACnC,OAAOqH,QAAQ3H,KAAqB2H,QAAQ5F,IAASzB,EAAc,I,qCAExDW,GAAW,IAAD,OASrB,OARUA,EAASsF,KAAI,SAAC3D,EAAOgF,QACeC,IAAtC,EAAK/H,MAAMmH,OAAOrE,EAAMG,YACxB,EAAKjD,MAAMmH,OAAOrE,EAAMG,UNRjC,WAGH,IAFA,IACIF,EAAQ,IACHiF,EAAI,EAAGA,EAAI,EAAGA,IACnBjF,GAHU,mBAGOkF,KAAKC,MAAsB,GAAhBD,KAAKE,WAErC,OAAOpF,EMEyCqF,IAExC,IAAIC,EAAW,EAAKrI,MAAMmH,OAAOrE,EAAMG,UACnCqF,EAAOC,OAAOzF,EAAMqB,cAAgB2D,EACxC,OAAO,kBAAC,EAAD,CAAcU,IAAKF,EAAMxF,MAAOA,EAAOC,MAAOsF,S,+BAmCzDrH,QAAQC,IAAI,gBADP,MASDJ,KAAKC,MAAMK,SANXA,EAHC,EAGDA,SACAjB,EAJC,EAIDA,gBACA+B,EALC,EAKDA,KACAzB,EANC,EAMDA,YACAiI,EAPC,EAODA,UACAC,EARC,EAQDA,WAEAf,EAAkB9G,KAAK8G,gBACvBzH,EACA+B,EACAzB,GAGJQ,QAAQC,IAAR,4BAAiC0G,IACjC,IAAIgB,EAAcD,EAAa,UAAY,UAC3C,OACI,yBAAKpH,UAAU,QACX,yBAAKA,UAAU,aAEf,yBACIA,UAAU,WACVsH,GAAG,mBACHC,IAAKhI,KAAK2G,SACVsB,SAAUjI,KAAKyG,iBACf/F,MAAO,CACHwH,SAAU,WACVrE,OAAQ,QACRhC,MAAM,GAAD,OAAKqE,EAAL,MACLiC,SAAU,SACVC,UAAW,SACXC,eAAgB,QAChBC,eAAe,GAAD,OAAKR,EAAL,YACdS,aAAc,OACdC,OAAQ,MACRC,YAAa,MACbC,WAAY,MACZC,aAAc,MACdC,YAAa,QACbC,YAAa,UACbC,WAAY,WAGflB,EACG,yBAAKnH,UAAU,YACX,yBACIkD,IAAI,cACJC,IAAI,UACJ/B,MAAOsE,EACPtC,OAAQsC,KAIhB,kBAAC,IAAM4C,SAAP,KACI,4BACItI,UAAU,gBACVC,MAAO,CAEHmD,OAAQ,OACRhC,MAAM,QAEVmH,QAAShJ,KAAKuG,gBACd0C,SAAUnC,GAET,IAVL,QAaC9G,KAAKkJ,eAAe5I,U,GA3H1BgB,IAAMC,WA8JdC,eA1BS,SAAAC,GACpB,MAAO,CACHnB,SAAUmB,EAAMnB,aAIG,SAAA2D,GACvB,MAAO,CACHuC,gBAAiB,SAAC7G,EAAayB,GAAd,OACb6C,EFpFmB,SAACtE,EAAayB,EAAMf,GAC/C,IAAM6D,EAAWC,cACbgF,EAAc,CACd9E,OAAQ,mBACRE,MAAOL,EACP9C,KAAMA,EACNkE,aAAc3F,GAGlB,OADAU,EAAWqE,KAAK7D,KAAKC,UAAUqI,IACxB,CACH3E,KA3EiC,4BA4EjCC,QAASP,GEyEIsC,CAAgB7G,EAAayB,EAAM2E,QAiBzCvE,CAA6C4E,G,IChKtDgD,E,YACF,WAAYnJ,GAAQ,IAAD,8BACf,4CAAMA,KAGVoJ,cAAgB,WACZ,GAAK,EAAKC,MAAM1C,QAAQ3E,MAAxB,CACA,IAXUA,EAWNsH,EAAU,EAAKD,MAAM1C,QAAQ3E,MAEjC,GADA,EAAKqH,MAAM1C,QAAQ3E,MAAQ,GACvBsH,EAAQC,WAhBA,SAiBR,EAAKvJ,MAAMwJ,aACR,GAAIF,EAAQC,WAjBV,uBAiBgC,CACrC,IAAIE,EAASH,EAAQI,MAAM,KAC3B,KACsB,IAAlBD,EAAOE,SAlBL3H,EAmBOyH,EAAO,GAlBJ,kBAAVzH,GAAsBA,aAAiByF,SAmBzCgC,EAAO,GAAGE,OAAS,GAMnB,OAJA,IAAIC,EAAWH,EAAO,GACtBvJ,QAAQC,IAAIyJ,GACZ,EAAK5J,MAAM6J,WAAWD,QAK1B,EAAK5J,MAAM8J,OAAOR,KAxBP,EA4BnBS,cAAgB,SAAApF,GACZ,OAAmB,KAAfA,EAAGqF,SAA+B,KAAbrF,EAAGsF,QACxB/J,QAAQC,IAAIwE,GACZ,EAAKyE,iBACE,IAhCI,EAsCnB9C,gBAAkB,SAAA3B,GACdA,EAAGuF,iBACH,EAAKd,iBAtCL,EAAKC,MAAQhI,IAAMyF,YAFJ,E,sEA0CT,IACEkC,EAAajJ,KAAKC,MAAlBgJ,SACR,OACI,yBACIxI,UAAU,QACVC,MAAO,CACHmB,MAAOqE,IAGX,yBAAKzF,UAAU,gBACX,yBACIA,UAAU,4BACVC,MAAO,CACHmB,MAAOqE,EAAW,MAGtB,2BACI6B,GAAG,aACHtH,UAAU,iBACV+D,KAAK,OACL9D,MAAO,CACHmB,MAAOqE,EAAW,KAEtBkE,WAAYpK,KAAKgK,cACjBf,SAAUA,EACVjB,IAAKhI,KAAKsJ,QAEd,0BACI7I,UAAU,wBACVC,MAAO,CACH2J,YAAa,GAAKnE,EAAW,OAHrC,MASJ,yBAAKzF,UAAU,QACX,4BACIA,UAAU,oBACVuI,QAAShJ,KAAKuG,gBACd0C,SAAUA,GAET,IALL,c,GAhFI3H,IAAMC,WCD5B+I,G,uLAEEnK,QAAQC,IAAI,iBADP,MAEyDJ,KAAKC,MAA3DF,EAFH,EAEGA,MAAOwK,EAFV,EAEUA,YAAaC,EAFvB,EAEuBA,cAAezG,EAFtC,EAEsCA,eACvC0G,EACAzD,QAAQjH,EAAMV,mBAAqB2H,QAAQjH,EAAMqB,MACjDsJ,EAAsB,UAAf3K,EAAMqB,KAAmBoJ,EAAgB,aACpD,OACI,yBAAK/J,UAAU,cACX,kBAAC,EAAD,CACIsJ,OAAQQ,EACRd,MAAOiB,EACPZ,WAAY/F,EACZkF,SAAUwB,S,GAbNnJ,IAAMC,YAgDfC,eA5BS,SAAAC,GACpB,MAAO,CACH1B,MAAO0B,EAAM1B,UAIM,SAAAkE,GACvB,MAAO,CACHsG,YAAa,SAAAhB,GAAO,OAAItF,ELQL,SAACsF,EAASlJ,GACjC,IAAM6D,EAAWC,cACbgF,EAAc,CACd9E,OAAQ,eACRE,MAAOL,EACPvC,QAAS4H,GAGb,OADAlJ,EAAWqE,KAAK7D,KAAKC,UAAUqI,IACxB,CACH3E,KA9CsB,iBA+CtBC,QAASP,GKlBwBqG,CAAYhB,EAASxD,KACtDyE,cAAe,kBAAMvG,ELqBA,SAAA5D,GACzB,IAAM6D,EAAWC,cACbgF,EAAc,CACd9E,OAAQ,QACRE,MAAOL,EACPyG,WAAY,QACZC,WAAY,IAGhB,OADAvK,EAAWqE,KAAK7D,KAAKC,UAAUqI,IACxB,CACH3E,KA7DsB,iBA8DtBC,QAASP,GKhCqBsG,CAAczE,KAC5ChC,eAAgB,SAAA8G,GAAe,OAC3B5G,EAASF,EAAegC,EAAM8E,QAiB3BrJ,CAA6C8I,GC9CtDQ,G,uLAEE3K,QAAQC,IAAI,wBADP,MAEiDJ,KAAKC,MAAnDI,EAFH,EAEGA,WAAY0K,EAFf,EAEeA,YAAaC,EAF5B,EAE4BA,iBACjC,OACI,yBACIvK,UAAU,OACVC,MAAO,CACHuK,aAAc,SAGlB,4BACIxK,UAAU,cACVwI,SAAU5I,EAAWY,WAAaZ,EAAWa,WAC7C8H,QAAS+B,GAHb,eAOA,4BACItK,UAAU,cACVwI,SACI5I,EAAW6K,gBACV7K,EAAWY,WACZZ,EAAWa,WAEf8H,QAASgC,GAPb,wBAWA,4BACIvK,UAAU,cACVwI,WAAY5I,EAAWY,WAAaZ,EAAWa,YAC/C8H,QAAShD,GAHb,sB,GA7BgB1E,IAAMC,YAiEvBC,eAxBS,SAAAC,GACpB,MAAO,CACHpB,WAAYoB,EAAMpB,eAIC,SAAA4D,GACvB,MAAO,CACH8G,YAAa,kBAAM9G,GJpDhB,SAAAA,GACHA,EAAS,CACLO,KATyB,2BAW7BuB,EAAO,IAAIoF,UAAJ,eAAsBC,OAAOC,SAASC,KAAtC,SAEFC,OAAS,SAAS3G,GACnBX,EAAS,CACLO,KAdyB,4BAezBC,QAASG,KAIjBmB,EAAKyF,QAAU,SAAS5G,GACpBX,EAAS,CACLO,KApBqB,wBAqBrBC,QAASG,KAGjBmB,EAAK0F,QAAU,SAAS7G,GACpBX,EAAS,CACLO,KAzBoB,uBA0BpBC,QAASG,KAIjBmB,EAAK2F,UAAY/G,EAAiBV,EAAU8B,GAC5C5F,QAAQC,IAAI2F,OI0BZiF,iBAAkB,kBAAM/G,GN9CC5D,EM8CyB0F,EN7C/C,SAAA9B,GACH,IAAMC,EAAWC,cACXwH,EAAc,CAChBtH,OAAQ,eACRE,MAAOL,GAEXD,EAAS,CACLO,KArBsB,qBAsBtBC,QAASP,IAEb7D,EAAWqE,KAAK7D,KAAKC,UAAU6K,OAXhC,IAA0BtL,MM6DlBmB,CAA6CsJ,GCvC7Cc,G,uLA3BP,OACI,yBAAKnL,UAAWnB,IAAmB,eAAiB,YAChD,6BACI,yBACImB,UAAU,QACVC,MAAO,CACHmB,MAAOqE,IAGX,yBAAKzF,UAAU,wBACX,yBAAKA,UAAU,cACX,kBAAC,EAAD,OAEJ,yBAAKA,UAAU,QACX,yBAAKA,UAAU,cAAf,YAEJ,kBAAC,EAAD,QAGR,kBAAC,EAAD,MACA,kBAAC,EAAD,Y,GAtBFa,IAAMC,Y,cCDlBsK,EAAe,CACjB5K,WAAW,EACXC,YAAY,EACZgK,eAAe,EACfY,MAAO,ICYX,IAAMD,EAAe,CACjB3L,mBAAoB,KACpBiB,IAAK,KACL9B,gBAAiB,GACjB+B,KAAM,KACNgE,QAAS,KACTzF,YAAa,M,YClBXkM,EAAe,CACjBvL,SAAU,GACVa,IAAK,KACLxB,YAAa,KACbyB,KAAM,KACNgE,QAAS,KACT/F,gBAAiB,GACjBuI,UAAW,KACXC,WAAY,MChBhB,IAAMgE,EAAe,CACjB9K,KAAM,ICEH,IAAMgL,EAAcC,YAAgB,CACvC3L,WJOG,WAA0D,IAA/BlB,EAA8B,uDAAtB0M,EAAcxH,EAAQ,uCAC5D,OAAQA,EAAOG,MACX,INf6B,wBMgBzB,OAAO,eACArF,EADP,CAEI+B,YAAY,IAEpB,INlB6B,wBMmBzB,OAAO,eACA/B,EADP,CAEI+B,YAAY,EACZ4K,MAAOzH,EAAOI,QAAQD,OAE9B,INzBiC,4BM0B7B,OAAO,eACArF,EADP,CAEI+B,YAAY,EACZD,WAAW,IAEnB,IN7B4B,uBM8BxB,OAAO,eACA9B,EADP,CAEI+B,YAAY,EACZD,WAAW,EACXiK,eAAe,IAEvB,IRrC0B,qBQsCtB,OAAO,eACA/L,EADP,CAEI+L,eAAe,IAEvB,QACI,OAAO/L,IItCfY,MHwBG,WAAqD,IAA/BZ,EAA8B,uDAAtB0M,EAAcxH,EAAQ,uCACvD,OAAQA,EAAOG,MACX,IP9B4B,uBO+BxB,OAAO,eACArF,EADP,CAEIE,gBAAiB,GACjB8B,IAAK,KACLC,KAAM,KACNgE,QAAS,KACTzF,YAAa,KACbO,mBAAoB,iBAE5B,IP1CiC,4BO2C7B,OAAO,eACAf,EADP,CAEIe,mBAAoB,wCAE5B,IT/C0B,qBSgDtB,OAAO,eACAf,EADP,CAEIE,gBAAiBgF,EAAOI,UAEhC,ITnD0B,qBSoDtB,OAAO,eACAtF,EADP,CAEIE,gBAAiBH,EAAWC,EAAOkF,EAAOI,QAAQF,OAClDpD,IAAKkD,EAAOI,QAAQtD,IACpBjB,mBAAoB,2BAE5B,ITzDuB,kBS0DnB,OAAO,eACAf,EADP,CAEIE,gBAAiBH,EAAWC,EAAOkF,EAAOI,QAAQF,SAE1D,IT7D6B,wBS8DzB,OAAO,eACApF,EADP,CAEIE,gBAAiBgF,EAAOI,UAEhC,ITjE6B,wBSkEzB,OAAO,eACAtF,EADP,CAEIE,gBAAiBH,EAAWC,EAAOkF,EAAOI,QAAQF,OAClDnD,KAAMiD,EAAOI,QAAQrD,KACrBgE,QAASf,EAAOI,QAAQW,QACxBzF,YAAa0E,EAAOI,QAAQ9E,cAEpC,ITxE0B,qBSyEtB,OAAO,eACAR,EADP,CAEIE,gBAAiBH,EAAWC,EAAOkF,EAAOI,QAAQF,SAE1D,IT5EsB,iBS6ElB,OAAO,eACApF,EADP,CAEIE,gBAAiBgF,EAAOI,UAEhC,IRxFsB,iBQ6FtB,IR3FsB,iBQ4FlB,OAAO,eACAtF,EADP,CAEIE,gBAAiBH,EAAWC,EAAOkF,EAAOI,QAAQF,SAE1D,IR/FiC,4BQgG7B,OAAO,eACApF,EADP,CAEIE,gBAAiBgF,EAAOI,UAEhC,IRlG0B,qBQmGtB,OAAO,eACAtF,EADP,CAEIE,gBAAiBH,EAAWC,EAAOkF,EAAOI,WAElD,IRxG6B,wBQyGzB,OAAO,eACAtF,EADP,CAEIE,gBAAiBH,EAAWC,EAAOkF,EAAOI,QAAQF,SAE1D,ITzGqB,gBS0GjB,OAAO,eACApF,EADP,CAEIe,mBAAoBmE,EAAOI,UAEnC,QACI,OAAOtF,IG/GfmB,SFaG,WAAwD,IAA/BnB,EAA8B,uDAAtB0M,EAAcxH,EAAQ,uCAC1D,OAAQA,EAAOG,MACX,IRpB4B,uBQqBxB,OAAO,eACArF,EADP,CAEImB,SAAU,GACVjB,gBAAiB,GACjBM,YAAa,KACbyB,KAAM,KACNgE,QAAS,KACTjE,IAAK,KACLyG,WAAW,IAEnB,IVhC0B,qBUiCtB,OAAO,eACAzI,EADP,CAEIgC,IAAKkD,EAAOI,QAAQtD,IACpByG,WAAW,IAEnB,IVnC6B,wBUoCzB,OAAO,eACAzI,EADP,CAEImB,SAAU,GACVX,YAAa0E,EAAOI,QAAQ9E,YAC5ByB,KAAMiD,EAAOI,QAAQrD,KACrBgE,QAASf,EAAOI,QAAQW,UAEhC,IThDsB,iBSiDlB,OAAO,eACAjG,EADP,CAEImB,SAAS,GAAD,mBAAMnB,EAAMmB,UAAZ,CAAsB+D,EAAOI,UACrCoD,YAAY,IAEpB,ITrD8B,yBSsD1B,OAAO,eACA1I,EADP,CAEI0I,YAAY,IAEpB,ITxDiC,4BSyD7B,OAAO,eACA1I,EADP,CAEIE,gBAAiBgF,EAAOI,UAEhC,IT3D0B,qBS4DtB,OAAO,eACAtF,EADP,CAEIE,gBAAiBH,EAAWC,EAAOkF,EAAOI,WAElD,ITjE6B,wBSkEzB,OAAItF,EAAMiC,OAASiD,EAAOI,QAAQrD,KACvB,eACAjC,EADP,CAEIQ,YAAaR,EAAMQ,YAAcR,EAAMiG,QACvC9E,SAAS,GAAD,mBAAM+D,EAAOI,QAAQoB,SAArB,YAAiC1G,EAAMmB,WAC/CjB,gBAAiBH,EAAWC,EAAOkF,EAAOI,QAAQF,SAG/C,eACApF,EADP,CAEIE,gBAAiBH,EAAWC,EAAOkF,EAAOI,QAAQF,SAG9D,QACI,OAAOpF,IE3EfoB,WDJG,WAAiE,IAA/BpB,EAA8B,uDAAtB0M,EAAcxH,EAAQ,uCACnE,OAAQA,EAAOG,MACX,IXEqB,gBWDjB,OAAO,eACArF,EADP,CAEI4B,KAAMsD,EAAOI,UAErB,ITT4B,uBSUxB,OAAO,eACAtF,EADP,CAEI4B,KAAM,KAEd,QACI,OAAO5B,M,yBEbNsC,EAAQwK,YAAYF,EAAaG,YAAgBC,IAAQC,MCMhEC,EAAcrF,QACa,cAA7BoE,OAAOC,SAASiB,UAEiB,UAA7BlB,OAAOC,SAASiB,UAEhBlB,OAAOC,SAASiB,SAASC,MACrB,2DAsCZ,SAASC,EAAgBC,EAAOC,GAC5BlN,UAAUmN,cACLC,SAASH,GACTI,MAAK,SAAAC,GACFA,EAAaC,cAAgB,WACzB,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACE,cAA3BF,EAAiB7N,QACbK,UAAUmN,cAAcQ,YAIxBhN,QAAQC,IACJ,iHAKAsM,GAAUA,EAAOU,UACjBV,EAAOU,SAASN,KAMpB3M,QAAQC,IAAI,sCAGRsM,GAAUA,EAAOW,WACjBX,EAAOW,UAAUP,WAOxCQ,OAAM,SAAAxB,GACH3L,QAAQ2L,MAAM,4CAA6CA,M,MCtFvEyB,IAASC,OACL,kBAAC,IAAD,CAAU/L,MAAOA,GACb,kBAAC,EAAD,OAEJgM,SAASC,eAAe,SDQrB,SAAkBhB,GACrB,GAA6C,kBAAmBlN,UAAW,CAGvE,GADkB,IAAImO,IAAIC,GAAwBxC,OAAOC,SAASwC,MACpDC,SAAW1C,OAAOC,SAASyC,OAIrC,OAGJ1C,OAAO2C,iBAAiB,QAAQ,WAC5B,IAAMtB,EAAK,UAAMmB,GAAN,sBAEPvB,IAgEhB,SAAiCI,EAAOC,GAEpCsB,MAAMvB,EAAO,CACTwB,QAAS,CAAE,iBAAkB,YAE5BpB,MAAK,SAAAqB,GAEF,IAAMC,EAAcD,EAASD,QAAQG,IAAI,gBAEjB,MAApBF,EAAShJ,QACO,MAAfiJ,IAC0C,IAAvCA,EAAYE,QAAQ,cAGxB7O,UAAUmN,cAAc2B,MAAMzB,MAAK,SAAAC,GAC/BA,EAAayB,aAAa1B,MAAK,WAC3BzB,OAAOC,SAASmD,eAKxBhC,EAAgBC,EAAOC,MAG9BY,OAAM,WACHnN,QAAQC,IACJ,oEAxFAqO,CAAwBhC,EAAOC,GAI/BlN,UAAUmN,cAAc2B,MAAMzB,MAAK,WAC/B1M,QAAQC,IACJ,iHAMRoM,EAAgBC,EAAOC,OC9BvCC,K","file":"static/js/main.fe05969b.chunk.js","sourcesContent":["export function clearToken(state, recvdToken) {\n    if (recvdToken === state.pendingMsgToken) {\n        return ''\n    } else {\n        return state.pendingMsgToken\n    }\n}\n\nexport function isMobileLayout() {\n    if (\n        /Mobile|Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(\n            navigator.userAgent\n        )\n    ) {\n        return true\n    } else {\n        return false\n    }\n}\n\nexport function getRandomColor() {\n    var letters = '0123456789ABCDEF'\n    var color = '#'\n    for (var i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)]\n    }\n    return color\n}\n\nexport function prevMessages(lastMessage) {\n    if (lastMessage == null) {\n        return 0\n    }\n    let prevMessage = lastMessage > -1 ? lastMessage + 1 : null\n    return prevMessage > 0 ? prevMessage : 0\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { PropTypes } from 'prop-types'\nimport './connectionStatus.css'\nimport { prevMessages, isMobileLayout } from '../utils/utils'\n\nconst alert1 = \"You've been resleeved to a stock option: \"\nconst alert2 =\n    '\\nRegular customers of Hendrix are offered a wide selection of bespoke sleeves.'\n\nclass ConnectionStatus extends React.Component {\n    computeTooltip() {\n        const { proto } = this.props\n        return proto.pendingMsgToken || proto.unhandledWsMessage\n    }\n    render() {\n        console.log('<ConnectionStatus/ >')\n        const { connection, messages, statusLast } = this.props\n        let prevMessage = prevMessages(messages.lastMessage)\n        let fsize = isMobileLayout() ? '80%' : '100%'\n        return (\n            <div\n                className=\"stats\"\n                style={{\n                    fontSize: fsize,\n                }}\n            >\n                <p\n                    data-tooltip={JSON.stringify(statusLast.info)}\n                    data-tooltip-location=\"right\"\n                >\n                    status:{' '}\n                    {connection.connected\n                        ? 'connected'\n                        : connection.connecting\n                        ? 'connecting'\n                        : 'disconnected'}\n                </p>\n                <div>\n                    sleeve:{' '}\n                    <text\n                        data-tooltip={`${alert1}${messages.nym}.\\n${alert2}`}\n                        data-tooltip-location=\"right\"\n                    >\n                        {messages.nym}\n                    </text>\n                </div>\n                <p> room: {messages.room}</p>\n                <p> prev messages: {prevMessage ? prevMessage : 'None'} </p>\n\n                <div>\n                    <div className=\"block-msg\">\n                        <text\n                            data-tooltip={this.computeTooltip()}\n                            data-tooltip-location=\"right\"\n                        >\n                            σ tip σ\n                        </text>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = store => {\n    return {\n        connection: store.connection,\n        messages: store.messages,\n        proto: store.proto,\n        statusLast: store.statusLast,\n    }\n}\n\nConnectionStatus.propTypes = {\n    connection: PropTypes.shape({\n        connected: PropTypes.bool.isRequired,\n        connecting: PropTypes.bool.isRequired,\n        authenticated: PropTypes.bool.isRequired,\n        error: PropTypes.string.isRequired,\n    }),\n    proto: PropTypes.shape({\n        unhandledWsMessage: PropTypes.string,\n        pendingMsgToken: PropTypes.string.isRequired,\n    }),\n}\nexport default connect(mapStateToProps)(ConnectionStatus)\n","import React from 'react'\nimport { PropTypes } from 'prop-types'\nimport './MessageEntry.css'\nimport { isMobileLayout } from '../utils/utils'\nimport classNames from 'classnames'\n\nexport let compWidth\nif (isMobileLayout()) {\n    compWidth = 260\n} else {\n    compWidth = 600\n}\nfunction timeConverter(UNIX_timestamp) {\n    var a = new Date(UNIX_timestamp * 1000)\n    var months = [\n        'Jan',\n        'Feb',\n        'Mar',\n        'Apr',\n        'May',\n        'Jun',\n        'Jul',\n        'Aug',\n        'Sep',\n        'Oct',\n        'Nov',\n        'Dec',\n    ]\n    var year = a.getFullYear()\n    var month = months[a.getMonth()]\n    var date = a.getDate()\n    var hour = a.getHours()\n    hour = hour < 10 ? '0' + hour : hour\n    var min = a.getMinutes()\n    min = min < 10 ? '0' + min : min\n    var sec = a.getSeconds()\n    sec = sec < 10 ? '0' + sec : sec\n    var time = hour + ':' + min + ':' + sec\n    var dater = date + ' ' + month + ' ' + year + ' '\n    return [dater, time]\n}\nclass MessageEntry extends React.Component {\n    renderTxtDiv(content, compWidth) {\n        let styleWidth = {\n            width: `${compWidth}px`,\n            overflowWrap: 'break-word',\n        }\n        return (\n            <div\n                className=\"txt-content\"\n                style={styleWidth}\n                dangerouslySetInnerHTML={{\n                    __html: content,\n                }}\n            ></div>\n        )\n        //let elem = `<div className=\"txt-content\" style=\"width:${compWidth}px;overflow-wrap:break-word;\">${content}</div>`\n        //return elem\n    }\n\n    render() {\n        const { value, color } = this.props\n        const isHendrix = value.from_nym === 'hendrix'\n\n        const dateTime = timeConverter(value.date_created)\n        const date = dateTime[0]\n        const time = dateTime[1]\n        const imageClass = classNames(\n            'bg-border-blur',\n        )\n        const blurredClass = classNames(\n            { 'bg-image-blur': !isHendrix },\n            'image-frame',\n            'block-msg'\n        )\n        return (\n            <div className=\"entry-msg\">\n                <div className={blurredClass}>\n                    <div className={imageClass}>\n                        {isHendrix ? (\n                            <img\n                                src=\"./hendrix.gif\"\n                                alt=\"hendrix\"\n                                className=\"immg\"\n                                width={68}\n                                height={90}\n                            ></img>\n                        ) : (\n                            <img\n                                src=\"./djunxiety.webp\"\n                                alt=\"djunxiety\"\n                                className=\"immg\"\n                                width={68}\n                                height={58}\n                            ></img>\n                        )}\n                    </div>\n                </div>\n                <div className=\"block-msg msg-header\">\n                    {!isHendrix ? (\n                        <div className=\"nym-content\">\n                            <font color={color}>{`${value.from_nym}`}</font>\n                        </div>\n                    ) : null}\n                    <div className=\"date-msg\">{date}</div>\n                    <div className=\"date-msg\">{time}</div>\n                </div>\n                <div className=\"block-msg\">\n                    <div className=\"content\">\n                        {this.renderTxtDiv(value.content, compWidth)}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\nMessageEntry.propTypes = {\n    value: PropTypes.shape({\n        content: PropTypes.string.isRequired,\n        date_created: PropTypes.number.isRequired,\n        from_nym: PropTypes.string.isRequired,\n        token: PropTypes.string,\n    }),\n    color: PropTypes.string.isRequired,\n}\nexport { MessageEntry }\n","import { v4 as uuidv4 } from 'uuid'\nimport { handleRegularMessageRcvd, handleHistoryRcvd } from './messages'\nexport const PROTO_AUTH_STARTED = 'PROTO_AUTH_STARTED'\nexport const PROTO_AUTH_SUCCESS = 'PROTO_AUTH_SUCCESS'\nexport const PROTO_AUTH_FAIL = 'PROTO_AUTH_FAIL'\nexport const PROTO_SELROOM_STARTED = 'PROTO_SELROOM_STARTED'\nexport const PROTO_SELROOM_SUCCESS = 'PROTO_SELROOM_SUCCESS'\nexport const PROTO_SELROOM_FAIL = 'PROTO_SELROOM_FAIL'\nexport const PROTO_SEND_MSG = 'PROTO_SEND_MSG'\nexport const PROTO_UNKNOWN = 'PROTO_UNKNOWN'\nexport const PROTO_GENERIC = 'PROTO_GENERIC'\nexport const PROTO_STUB_ACTION = 'PROTO_STUB_ACTION'\n\nconst defaultRoom = 'Lobby'\n\nexport function initAuthenticate(connection) {\n    return dispatch => {\n        const msgToken = uuidv4()\n        const authmessage = {\n            action: 'authenticate',\n            token: msgToken,\n        }\n        dispatch({\n            type: PROTO_AUTH_STARTED,\n            payload: msgToken,\n        })\n        connection.send(JSON.stringify(authmessage))\n    }\n}\nexport function initSelectroom(connection, dstRoom) {\n    return dispatch => {\n        const msgToken = uuidv4()\n        const selectRoomMessage = {\n            action: 'select_room',\n            destination_room: dstRoom,\n            token: msgToken,\n        }\n        dispatch({\n            type: PROTO_SELROOM_STARTED,\n            payload: msgToken,\n        })\n        connection.send(JSON.stringify(selectRoomMessage))\n    }\n}\n\nexport const sendMessage = (message, connection) => {\n    const msgToken = uuidv4()\n    let sendmessage = {\n        action: 'send_message',\n        token: msgToken,\n        content: message,\n    }\n    connection.send(JSON.stringify(sendmessage))\n    return {\n        type: PROTO_SEND_MSG,\n        payload: msgToken,\n    }\n}\n\nexport const sendQueryMenu = connection => {\n    const msgToken = uuidv4()\n    let sendmessage = {\n        action: 'query',\n        token: msgToken,\n        query_name: '/menu',\n        parameters: {},\n    }\n    connection.send(JSON.stringify(sendmessage))\n    return {\n        type: PROTO_SEND_MSG,\n        payload: msgToken,\n    }\n}\n\nexport function message_received(dispatch, connection) {\n    return ev => {\n        let protoMsg\n        try {\n            protoMsg = JSON.parse(ev.data)\n        } catch (err) {\n            console.log(`${err} - json.parse?`)\n            dispatch({\n                type: PROTO_UNKNOWN,\n                payload: ev.data,\n            })\n            return\n        }\n        dispatch({\n            type: PROTO_GENERIC,\n            payload: protoMsg,\n        })\n        switch (protoMsg.msg.action) {\n            case 'authenticate':\n                console.log('authenticate msg received')\n                handleAuthenticate(protoMsg, dispatch, connection)\n                break\n            case 'select_room':\n                console.log('select_room msg received')\n                handleSelectRoom(protoMsg, dispatch)\n                break\n            case 'send_message':\n                handleRegularMessageRcvd(protoMsg, dispatch)\n                break\n            case 'history_retrieve':\n                handleHistoryRcvd(protoMsg, dispatch)\n                break\n            default:\n                dispatch({\n                    type: PROTO_UNKNOWN,\n                    payload: ev.data,\n                })\n        }\n    }\n}\nfunction handleAuthenticate(protoMsg, dispatch, connection) {\n    switch (protoMsg.status) {\n        case 'success':\n            dispatch({\n                type: PROTO_AUTH_SUCCESS,\n                payload: {\n                    token: protoMsg.msg.token,\n                    nym: protoMsg.msg.from_nym,\n                },\n            })\n            initSelectroom(connection, defaultRoom)(dispatch)\n            break\n        case 'error':\n            dispatch({\n                type: PROTO_AUTH_FAIL,\n                payload: {\n                    token: protoMsg.msg.token,\n                },\n            })\n            break\n        default:\n            return\n    }\n}\n\nfunction handleSelectRoom(protoMsg, dispatch) {\n    switch (protoMsg.status) {\n        case 'success':\n            dispatch({\n                type: PROTO_SELROOM_SUCCESS,\n                payload: {\n                    token: protoMsg.msg.token,\n                    room: protoMsg.msg.room,\n                    perPage: protoMsg.msg.page,\n                    lastMessage: protoMsg.msg.last_message,\n                },\n            })\n            break\n        case 'error':\n            dispatch({\n                type: PROTO_SELROOM_FAIL,\n                payload: {\n                    token: protoMsg.msg.token,\n                },\n            })\n            break\n        default:\n            return\n    }\n}\n","import { v4 as uuidv4 } from 'uuid'\nexport const PROTO_MSG_RCVD = 'PROTO_MSG_RCVD'\nexport const PROTO_MSG_CLEAR_NOTIFY = 'PROTO_MSG_CLEAR_NOTIFY'\nexport const PROTO_MSG_FAIL = 'PROTO_MSG_FAIL'\nexport const PROTO_HISTORY_GET_STARTED = 'PROTO_HISTORY_GET_STARTED'\nexport const PROTO_HISTORY_SUCCESS = 'PROTO_HISTORY_SUCCESS'\nexport const PROTO_HISTORY_FAIL = 'PROTO_HISTORY_FAIL'\n\nconst flashTimeout = 3000\nexport function handleRegularMessageRcvd(protoMsg, dispatch) {\n    switch (protoMsg.status) {\n        case 'success':\n            dispatch({\n                type: PROTO_MSG_RCVD,\n                payload: {\n                    content: protoMsg.msg.content,\n                    date_created: protoMsg.msg.date_created,\n                    from_nym: protoMsg.msg.from_nym,\n                    token: protoMsg.msg.token,\n                },\n            })\n            setTimeout(() => {\n                dispatch({\n                    type: PROTO_MSG_CLEAR_NOTIFY,\n                })\n            }, flashTimeout)\n            break\n        case 'error':\n            dispatch({\n                type: PROTO_MSG_FAIL,\n                payload: {\n                    token: protoMsg.msg.token,\n                },\n            })\n            break\n        default:\n            return\n    }\n}\nexport function handleHistoryRcvd(protoMsg, dispatch) {\n    switch (protoMsg.status) {\n        case 'success':\n            const msgs = protoMsg.msg.result.map(value => {\n                return {\n                    content: value.content,\n                    date_created: value.date_created,\n                    from_nym: value.from_nym,\n                }\n            })\n            dispatch({\n                type: PROTO_HISTORY_SUCCESS,\n                payload: {\n                    token: protoMsg.msg.token,\n                    room: protoMsg.msg.room,\n                    history: msgs,\n                },\n            })\n            break\n        case 'error':\n            dispatch({\n                type: PROTO_HISTORY_FAIL,\n                payload: protoMsg.msg.token,\n            })\n            break\n        default:\n            return\n    }\n}\n\nexport const historyRetrieve = (lastMessage, room, connection) => {\n    const msgToken = uuidv4()\n    let sendmessage = {\n        action: 'history_retrieve',\n        token: msgToken,\n        room: room,\n        last_message: lastMessage,\n    }\n    connection.send(JSON.stringify(sendmessage))\n    return {\n        type: PROTO_HISTORY_GET_STARTED,\n        payload: msgToken,\n    }\n}\n","import { message_received } from './proto.js'\nexport const CONNECT_TO_WS_REQUEST = 'CONNECT_TO_WS_REQUEST'\nexport const CONNECT_TO_WS_ESTABLISHED = 'CONNECT_TO_WS_ESTABLISHED'\nexport const CONNECT_TO_WS_ERRORED = 'CONNECT_TO_WS_ERRORED'\nexport const CONNECT_TO_WS_CLOSED = 'CONNECT_TO_WS_CLOSED'\n\nexport let conn = null\nexport function connectToWs() {\n    return dispatch => {\n        dispatch({\n            type: CONNECT_TO_WS_REQUEST,\n        })\n        conn = new WebSocket(`ws://${window.location.host}/ws`)\n        //conn = new WebSocket(`ws://${window.location.hostname}:8080/ws`)\n        conn.onopen = function(ev) {\n            dispatch({\n                type: CONNECT_TO_WS_ESTABLISHED,\n                payload: ev,\n            })\n        }\n\n        conn.onerror = function(ev) {\n            dispatch({\n                type: CONNECT_TO_WS_ERRORED,\n                payload: ev,\n            })\n        }\n        conn.onclose = function(ev) {\n            dispatch({\n                type: CONNECT_TO_WS_CLOSED,\n                payload: ev,\n            })\n        }\n\n        conn.onmessage = message_received(dispatch, conn)\n        console.log(conn)\n    }\n}\n\nexport function connectionClose() {\n    conn.close()\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { PropTypes } from 'prop-types'\nimport { MessageEntry } from '../components/MessageEntry'\nimport { conn } from '../actions/connectionActions'\nimport { historyRetrieve } from '../actions/messages'\nimport { compWidth } from '../components/MessageEntry'\nimport { isMobileLayout, getRandomColor, prevMessages } from '../utils/utils'\nimport './messages.css'\n\nexport let expwidth = compWidth + 200\nlet imgdim = isMobileLayout ? 500 : 600\nclass Messages extends React.Component {\n    state = {\n        lastScrollTop: null,\n        colors: {},\n    }\n    constructor(props) {\n        super(props)\n        this.viewPort = React.createRef()\n    }\n\n    historyDisabled(pendingMsgToken, room, lastMessage) {\n        return Boolean(pendingMsgToken) || !Boolean(room) || lastMessage < 0\n    }\n    renderTemplate(messages) {\n        var res = messages.map((value, index) => {\n            if (this.state.colors[value.from_nym] === undefined) {\n                this.state.colors[value.from_nym] = getRandomColor() // eslint-disable-line\n            }\n            let newcolor = this.state.colors[value.from_nym]\n            let dkey = String(value.date_created) + index\n            return <MessageEntry key={dkey} value={value} color={newcolor} />\n        })\n        return res\n    }\n    btnClickHandler = ev => {\n        const { lastMessage, room } = this.props.messages\n        this.props.historyRetrieve(lastMessage, room)\n    }\n\n    scrollTopHandler = () => {\n        const st = this.viewPort.current.scrollTop\n        if (this.state.lastScrollTop == null) {\n            this.state.lastScrollTop = st <= 0 ? 0 : st // eslint-disable-line\n            return\n        }\n        if (st > this.state.lastScrollTop) {\n        } else {\n            if (st < 10) {\n                const {\n                    lastMessage,\n                    room,\n                    pendingMsgToken,\n                } = this.props.messages\n                if (!this.historyDisabled(pendingMsgToken, room, lastMessage)) {\n                    this.props.historyRetrieve(lastMessage, room)\n                }\n                if (prevMessages(lastMessage)) {\n                    this.viewPort.current.scrollTop = this.state.lastScrollTop\n                    return\n                }\n            }\n        }\n        this.state.lastScrollTop = st <= 0 ? 0 : st // eslint-disable-line\n    }\n    render() {\n        console.log('<Messages/ >')\n        const {\n            messages,\n            pendingMsgToken,\n            room,\n            lastMessage,\n            closedscr,\n            notifyFlag,\n        } = this.props.messages\n        let historyDisabled = this.historyDisabled(\n            pendingMsgToken,\n            room,\n            lastMessage\n        )\n\n        console.log(`history disabled: ${historyDisabled}`)\n        let colorScroll = notifyFlag ? '#999999' : '#444444'\n        return (\n            <div className=\"msgs\">\n                <div className=\"centered\"></div>\n\n                <div\n                    className=\"viewport\"\n                    id=\"containerElement\"\n                    ref={this.viewPort}\n                    onScroll={this.scrollTopHandler}\n                    style={{\n                        position: 'relative',\n                        height: '550px',\n                        width: `${expwidth}px`,\n                        overflow: 'scroll',\n                        overflowX: 'hidden',\n                        scrollbarWidth: 'thick',\n                        scrollbarColor: `${colorScroll} #000000`,\n                        marginBottom: '10px',\n                        border: '1px',\n                        borderRight: '0px',\n                        borderLeft: '0px',\n                        borderBottom: '1px',\n                        borderStyle: 'solid',\n                        borderColor: '#444444',\n                        alignItems: 'center',\n                    }}\n                >\n                    {closedscr ? (\n                        <div className=\"centered\">\n                            <img\n                                src=\"./ecorp.gif\"\n                                alt=\"hendrix\"\n                                width={imgdim}\n                                height={imgdim}\n                            ></img>\n                        </div>\n                    ) : (\n                        <React.Fragment>\n                            <button\n                                className=\"shadowbtn btn\"\n                                style={{\n                                    //width: `${expwidth}px`,\n                                    height: '20px',\n                                    width: `100%`,\n                                }}\n                                onClick={this.btnClickHandler}\n                                disabled={historyDisabled}\n                            >\n                                {' '}\n                                hist\n                            </button>\n                            {this.renderTemplate(messages)}\n                        </React.Fragment>\n                    )}\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = store => {\n    return {\n        messages: store.messages,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        historyRetrieve: (lastMessage, room) =>\n            dispatch(historyRetrieve(lastMessage, room, conn)),\n    }\n}\n\nMessages.propTypes = {\n    messages: PropTypes.shape({\n        messages: PropTypes.array.isRequired,\n        nym: PropTypes.string,\n        lastMessage: PropTypes.number,\n        room: PropTypes.string,\n        perPage: PropTypes.number,\n        pendingMsgToken: PropTypes.string.isRequired,\n        closed: PropTypes.bool,\n        notifyFlag: PropTypes.bool,\n    }),\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Messages)\n","import React from 'react'\nimport './PrefixedInput.css'\nimport { expwidth } from '../containers/messages'\nconst menuSpecial = '/menu'\nconst rentRoom = '/rent-lavatory-room'\n\nfunction isString(value) {\n    return typeof value === 'string' || value instanceof String\n}\n\nclass PrefixedInput extends React.Component {\n    constructor(props) {\n        super(props)\n        this.input = React.createRef()\n    }\n    commonHandler = () => {\n        if (!this.input.current.value) return\n        let message = this.input.current.value\n        this.input.current.value = ''\n        if (message.startsWith(menuSpecial)) {\n            this.props.query()\n        } else if (message.startsWith(rentRoom)) {\n            let substr = message.split(' ')\n            if (\n                substr.length === 2 &&\n                isString(substr[1]) &&\n                substr[1].length > 0\n            ) {\n                let nextRoom = substr[1]\n                console.log(nextRoom)\n                this.props.changeRoom(nextRoom)\n            } else {\n                return\n            }\n        } else {\n            this.props.sender(message)\n        }\n    }\n\n    keyPrsHandler = ev => {\n        if (ev.keyCode === 13 || ev.which === 13) {\n            console.log(ev)\n            this.commonHandler()\n            return false\n        } else {\n            return true\n        }\n    }\n\n    btnClickHandler = ev => {\n        ev.preventDefault()\n        this.commonHandler()\n    }\n    render() {\n        const { disabled } = this.props\n        return (\n            <div\n                className=\"table\"\n                style={{\n                    width: expwidth,\n                }}\n            >\n                <div className=\"group-header\">\n                    <div\n                        className=\"pref-input-container cell\"\n                        style={{\n                            width: expwidth - 110,\n                        }}\n                    >\n                        <input\n                            id=\"unique_say\"\n                            className=\"prefixed-input\"\n                            type=\"text\"\n                            style={{\n                                width: expwidth - 150,\n                            }}\n                            onKeyPress={this.keyPrsHandler}\n                            disabled={disabled}\n                            ref={this.input}\n                        />\n                        <span\n                            className=\"inside-prefixed-input\"\n                            style={{\n                                marginLeft: -1 * (expwidth - 130),\n                            }}\n                        >\n                            $\n                        </span>\n                    </div>\n                    <div className=\"cell\">\n                        <button\n                            className=\"shadowbtn big-btn\"\n                            onClick={this.btnClickHandler}\n                            disabled={disabled}\n                        >\n                            {' '}\n                            say\n                        </button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport { PrefixedInput }\n","import React from 'react'\nimport { PropTypes } from 'prop-types'\nimport { connect } from 'react-redux'\n//import {} from '../actions/proto'\nimport { PrefixedInput } from '../components/PrefixedInput'\nimport { conn } from '../actions/connectionActions'\nimport { sendMessage, sendQueryMenu, initSelectroom } from '../actions/proto'\nimport './ChatProto.css'\n\nclass ChatProto extends React.Component {\n    render() {\n        console.log('<ChatProto/ >')\n        const { proto, sendMessage, sendQueryMenu, initSelectroom } = this.props\n        let sendDisabled =\n            Boolean(proto.pendingMsgToken) || !Boolean(proto.room)\n        let menu = proto.room === 'Lobby' ? sendQueryMenu : () => {}\n        return (\n            <div className=\"chat-proto\">\n                <PrefixedInput\n                    sender={sendMessage}\n                    query={menu}\n                    changeRoom={initSelectroom}\n                    disabled={sendDisabled}\n                />\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = store => {\n    return {\n        proto: store.proto,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        sendMessage: message => dispatch(sendMessage(message, conn)),\n        sendQueryMenu: () => dispatch(sendQueryMenu(conn)),\n        initSelectroom: destinationRoom =>\n            dispatch(initSelectroom(conn, destinationRoom)),\n    }\n}\n\nChatProto.propTypes = {\n    proto: PropTypes.shape({\n        unhandledWsMessage: PropTypes.string,\n        nym: PropTypes.string,\n        pendingMsgToken: PropTypes.string.isRequired,\n        room: PropTypes.string,\n        perPage: PropTypes.number,\n        lastMessage: PropTypes.number,\n    }),\n    sendMessage: PropTypes.func.isRequired,\n    sendQueryMenu: PropTypes.func.isRequired,\n    initSelectroom: PropTypes.func.isRequired,\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatProto)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { PropTypes } from 'prop-types'\nimport {\n    connectToWs,\n    connectionClose,\n    conn,\n} from '../actions/connectionActions'\nimport { initAuthenticate } from '../actions/proto'\nimport './connectionButtons.css'\n\nclass ConnectionButtons extends React.Component {\n    render() {\n        console.log('<ConnectionStatus/ >')\n        const { connection, initConnect, initAuthenticate } = this.props\n        return (\n            <div\n                className=\"cell\"\n                style={{\n                    paddingRight: '20px',\n                }}\n            >\n                <button\n                    className=\"darkbtn btn\"\n                    disabled={connection.connected || connection.connecting}\n                    onClick={initConnect}\n                >\n                    enter lobby\n                </button>\n                <button\n                    className=\"darkbtn btn\"\n                    disabled={\n                        connection.authenticated ||\n                        !connection.connected ||\n                        connection.connecting\n                    }\n                    onClick={initAuthenticate}\n                >\n                    upload consciousness\n                </button>\n                <button\n                    className=\"darkbtn btn\"\n                    disabled={!(connection.connected || connection.connecting)}\n                    onClick={connectionClose}\n                >\n                    leave hendrix\n                </button>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = store => {\n    return {\n        connection: store.connection,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        initConnect: () => dispatch(connectToWs()),\n        initAuthenticate: () => dispatch(initAuthenticate(conn)),\n    }\n}\n\nConnectionButtons.propTypes = {\n    connection: PropTypes.shape({\n        connected: PropTypes.bool.isRequired,\n        connecting: PropTypes.bool.isRequired,\n        authenticated: PropTypes.bool.isRequired,\n        error: PropTypes.string.isRequired,\n    }),\n    initConnect: PropTypes.func.isRequired,\n    initAuthenticate: PropTypes.func.isRequired,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ConnectionButtons)\n","import React from 'react'\nimport ConnectionStatus from '../containers/connectionStatus.js'\nimport ChatProto from '../containers/chatProto'\nimport Messages, { expwidth } from '../containers/messages'\nimport ConnectionButtons from '../containers/connectionButtons'\nimport './App.css'\nimport { isMobileLayout } from '../utils/utils'\n\nclass App extends React.Component {\n    render() {\n        return (\n            <div className={isMobileLayout() ? 'not-centered' : 'centered'}>\n                <div>\n                    <div\n                        className=\"table\"\n                        style={{\n                            width: expwidth,\n                        }}\n                    >\n                        <div className=\"group-header greyish\">\n                            <div className=\"cell stats\">\n                                <ConnectionStatus />\n                            </div>\n                            <div className=\"cell\">\n                                <div className=\"App-header\">hendrix</div>\n                            </div>\n                            <ConnectionButtons />\n                        </div>\n                    </div>\n                    <Messages />\n                    <ChatProto />\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default App\n","import {\n    CONNECT_TO_WS_REQUEST,\n    CONNECT_TO_WS_ESTABLISHED,\n    CONNECT_TO_WS_ERRORED,\n    CONNECT_TO_WS_CLOSED,\n} from '../actions/connectionActions.js'\nimport { PROTO_AUTH_SUCCESS } from '../actions/proto'\nconst initialState = {\n    connected: false,\n    connecting: false,\n    authenticated: false,\n    error: '',\n}\n\nexport function connectionReducer(state = initialState, action) {\n    switch (action.type) {\n        case CONNECT_TO_WS_REQUEST:\n            return {\n                ...state,\n                connecting: true,\n            }\n        case CONNECT_TO_WS_ERRORED:\n            return {\n                ...state,\n                connecting: false,\n                error: action.payload.type,\n            }\n        case CONNECT_TO_WS_ESTABLISHED:\n            return {\n                ...state,\n                connecting: false,\n                connected: true,\n            }\n        case CONNECT_TO_WS_CLOSED:\n            return {\n                ...state,\n                connecting: false,\n                connected: false,\n                authenticated: false,\n            }\n        case PROTO_AUTH_SUCCESS:\n            return {\n                ...state,\n                authenticated: true,\n            }\n        default:\n            return state\n    }\n}\n","import {\n    PROTO_AUTH_STARTED,\n    PROTO_AUTH_SUCCESS,\n    PROTO_AUTH_FAIL,\n    PROTO_SELROOM_STARTED,\n    PROTO_SELROOM_SUCCESS,\n    PROTO_SELROOM_FAIL,\n    PROTO_UNKNOWN,\n    PROTO_SEND_MSG,\n} from '../actions/proto'\nimport {\n    PROTO_MSG_RCVD,\n    PROTO_MSG_FAIL,\n    PROTO_HISTORY_GET_STARTED,\n    PROTO_HISTORY_FAIL,\n    PROTO_HISTORY_SUCCESS,\n} from '../actions/messages'\nimport {\n    CONNECT_TO_WS_CLOSED,\n    CONNECT_TO_WS_ESTABLISHED,\n} from '../actions/connectionActions'\nimport { clearToken } from '../utils/utils'\n\nconst initialState = {\n    unhandledWsMessage: null,\n    nym: null,\n    pendingMsgToken: '', //false in boolean context\n    room: null,\n    perPage: null,\n    lastMessage: null, //proto - room last msg pointer/counter\n}\n\nexport function protoReducer(state = initialState, action) {\n    switch (action.type) {\n        case CONNECT_TO_WS_CLOSED:\n            return {\n                ...state,\n                pendingMsgToken: '',\n                nym: null,\n                room: null,\n                perPage: null,\n                lastMessage: null,\n                unhandledWsMessage: 'left Hendrix',\n            }\n        case CONNECT_TO_WS_ESTABLISHED:\n            return {\n                ...state,\n                unhandledWsMessage: 'shall set foot on Hendrix threshold',\n            }\n        case PROTO_AUTH_STARTED:\n            return {\n                ...state,\n                pendingMsgToken: action.payload,\n            }\n        case PROTO_AUTH_SUCCESS:\n            return {\n                ...state,\n                pendingMsgToken: clearToken(state, action.payload.token),\n                nym: action.payload.nym,\n                unhandledWsMessage: 'consciousness uploaded',\n            }\n        case PROTO_AUTH_FAIL:\n            return {\n                ...state,\n                pendingMsgToken: clearToken(state, action.payload.token),\n            }\n        case PROTO_SELROOM_STARTED:\n            return {\n                ...state,\n                pendingMsgToken: action.payload,\n            }\n        case PROTO_SELROOM_SUCCESS:\n            return {\n                ...state,\n                pendingMsgToken: clearToken(state, action.payload.token),\n                room: action.payload.room,\n                perPage: action.payload.perPage,\n                lastMessage: action.payload.lastMessage,\n            }\n        case PROTO_SELROOM_FAIL:\n            return {\n                ...state,\n                pendingMsgToken: clearToken(state, action.payload.token),\n            }\n        case PROTO_SEND_MSG:\n            return {\n                ...state,\n                pendingMsgToken: action.payload,\n            }\n        case PROTO_MSG_RCVD:\n            return {\n                ...state,\n                pendingMsgToken: clearToken(state, action.payload.token),\n            }\n        case PROTO_MSG_FAIL:\n            return {\n                ...state,\n                pendingMsgToken: clearToken(state, action.payload.token),\n            }\n        case PROTO_HISTORY_GET_STARTED:\n            return {\n                ...state,\n                pendingMsgToken: action.payload,\n            }\n        case PROTO_HISTORY_FAIL:\n            return {\n                ...state,\n                pendingMsgToken: clearToken(state, action.payload),\n            }\n        case PROTO_HISTORY_SUCCESS:\n            return {\n                ...state,\n                pendingMsgToken: clearToken(state, action.payload.token),\n            }\n        case PROTO_UNKNOWN:\n            return {\n                ...state,\n                unhandledWsMessage: action.payload,\n            }\n        default:\n            return state\n    }\n}\n","import { PROTO_SELROOM_SUCCESS, PROTO_AUTH_SUCCESS } from '../actions/proto'\nimport {\n    PROTO_MSG_RCVD,\n    PROTO_HISTORY_GET_STARTED,\n    PROTO_HISTORY_FAIL,\n    PROTO_HISTORY_SUCCESS,\n    PROTO_MSG_CLEAR_NOTIFY,\n} from '../actions/messages'\nimport { CONNECT_TO_WS_CLOSED } from '../actions/connectionActions'\nimport { clearToken } from '../utils/utils'\n\nconst initialState = {\n    messages: [],\n    nym: null,\n    lastMessage: null, //proto - room last msg pointer/counter\n    room: null,\n    perPage: null,\n    pendingMsgToken: '',\n    closedscr: null,\n    notifyFlag: null,\n}\n\nexport function messagesReducer(state = initialState, action) {\n    switch (action.type) {\n        case CONNECT_TO_WS_CLOSED:\n            return {\n                ...state,\n                messages: [],\n                pendingMsgToken: '',\n                lastMessage: null,\n                room: null,\n                perPage: null,\n                nym: null,\n                closedscr: true,\n            }\n        case PROTO_AUTH_SUCCESS:\n            return {\n                ...state,\n                nym: action.payload.nym,\n                closedscr: false,\n            }\n        case PROTO_SELROOM_SUCCESS:\n            return {\n                ...state,\n                messages: [],\n                lastMessage: action.payload.lastMessage,\n                room: action.payload.room,\n                perPage: action.payload.perPage,\n            }\n        case PROTO_MSG_RCVD:\n            return {\n                ...state,\n                messages: [...state.messages, action.payload],\n                notifyFlag: true,\n            }\n        case PROTO_MSG_CLEAR_NOTIFY:\n            return {\n                ...state,\n                notifyFlag: false,\n            }\n        case PROTO_HISTORY_GET_STARTED:\n            return {\n                ...state,\n                pendingMsgToken: action.payload,\n            }\n        case PROTO_HISTORY_FAIL:\n            return {\n                ...state,\n                pendingMsgToken: clearToken(state, action.payload),\n            }\n        case PROTO_HISTORY_SUCCESS:\n            if (state.room === action.payload.room) {\n                return {\n                    ...state,\n                    lastMessage: state.lastMessage - state.perPage,\n                    messages: [...action.payload.history, ...state.messages],\n                    pendingMsgToken: clearToken(state, action.payload.token),\n                }\n            } else {\n                return {\n                    ...state,\n                    pendingMsgToken: clearToken(state, action.payload.token),\n                }\n            }\n        default:\n            return state\n    }\n}\n","import { PROTO_GENERIC } from '../actions/proto'\nimport { CONNECT_TO_WS_CLOSED } from '../actions/connectionActions'\n\nconst initialState = {\n    info: {},\n}\nexport function statusLastMessageReducer(state = initialState, action) {\n    switch (action.type) {\n        case PROTO_GENERIC:\n            return {\n                ...state,\n                info: action.payload,\n            }\n        case CONNECT_TO_WS_CLOSED:\n            return {\n                ...state,\n                info: {},\n            }\n        default:\n            return state\n    }\n}\n","import { combineReducers } from 'redux'\nimport { connectionReducer } from './connection'\nimport { protoReducer } from './proto'\nimport { messagesReducer } from './messages'\nimport { statusLastMessageReducer } from './lastMessage.js'\n\nexport const rootReducer = combineReducers({\n    connection: connectionReducer,\n    proto: protoReducer,\n    messages: messagesReducer,\n    statusLast: statusLastMessageReducer,\n})\n","import { createStore, applyMiddleware } from 'redux'\nimport { rootReducer } from '../reducers'\nimport logger from 'redux-logger'\nimport thunk from 'redux-thunk'\n\n//export const store = createStore(() => {}, {})\nexport const store = createStore(rootReducer, applyMiddleware(logger, thunk))\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.0/8 are considered localhost for IPv4.\n        window.location.hostname.match(\n            /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n        )\n)\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config)\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n                    )\n                })\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config)\n            }\n        })\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing\n                if (installingWorker == null) {\n                    return\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                            )\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration)\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.')\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration)\n                            }\n                        }\n                    }\n                }\n            }\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error)\n        })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' },\n    })\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type')\n            if (\n                response.status === 404 ||\n                (contentType != null &&\n                    contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload()\n                    })\n                })\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config)\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.'\n            )\n        })\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then(registration => {\n                registration.unregister()\n            })\n            .catch(error => {\n                console.error(error.message)\n            })\n    }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\n\nimport { Provider } from 'react-redux'\nimport { store } from './store/configureStore'\nimport * as serviceWorker from './serviceWorker'\n\nimport './index.css'\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root')\n)\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorker.register()\n"],"sourceRoot":""}